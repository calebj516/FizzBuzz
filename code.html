<!DOCTYPE html>
<html lang="en" class="h-100">
  <head>
    <title>FizzBuzz: A Coding Project By Caleb Jones</title>
    <!-- Required meta tags -->
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />
    <!-- Bootstrap CSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-F3w7mX95PdgyTmZZMECAngseQB83DfGTowi0iMjiWaeVhAn4FJkqJByhZMI3AhiU"
      crossorigin="anonymous"
    />
    <!-- Font Awesome -->
    <script
      src="https://kit.fontawesome.com/5db21ba9c6.js"
      crossorigin="anonymous"
    ></script>
    <!--Google Fonts for Racing Sans One -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Racing+Sans+One&display=swap"
      rel="stylesheet"
    />
    <!-- CSS -->
    <link rel="stylesheet" href="css/site.css" />
    <link rel="stylesheet" href="css/prism.css" />
    <link rel="icon" type="image/png" href="img/favicon-32x32.png" />
  </head>

  <body class="d-flex flex-column h-100">
    <!-- Nav Section -->
    <nav class="navbar navbar-expand-md navbar-dark fixed-top">
      <div class="container-fluid">
        <a class="navbar-brand logoFont" href="index.html"> FizzBuzz</a>
        <button
          class="navbar-toggler"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#navbarCollapse"
          aria-controls="navbarCollapse"
          aria-expanded="false"
          aria-label="Toggle navigation"
        >
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarCollapse">
          <ul class="navbar-nav me-auto mb-2 mb-md-0">
            <li class="nav-item">
              <a class="nav-link" href="index.html">Home</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="app.html">The App</a>
            </li>
            <li class="nav-item">
              <a class="nav-link active" aria-current="page" href="code.html"
                >The Code</a
              >
            </li>
            <li class="nav-item">
              <a
                class="nav-link"
                target="_blank"
                href="https://github.com/calebj516/FizzBuzz"
                >Git Repo</a
              >
            </li>
            <li class="nav-item">
              <a
                class="nav-link"
                target="_blank"
                href="https://calebj-portfolio.netlify.app/"
                >About</a
              >
            </li>
          </ul>
        </div>
      </div>
    </nav>
    <!-- Main Section -->
    <main class="flex-shrink-0">
      <div class="container py-5 px-5 mt-5">
        <h2 class="border-1 border-bottom border-dark">
          The Code for Fizz Buzz.
        </h2>
        <div class="row row-cols-1 row-cols-lg-2">
          <div class="col-lg-9">
            <pre class="line-numbers">
                <code class="language-javascript">                  
                  function getValues() {
                    // get values from the page
                  
                    let fizzVal = parseInt(document.getElementById('fizz').value);
                    let buzzVal = parseInt(document.getElementById('buzz').value);
                  
                    // call fizzBizz function to calculate results
                    if(Number.isInteger(fizzVal) && Number.isInteger(buzzVal)) {
                      const fizzBuzzArray = fizzBuzz(fizzVal, buzzVal);
                  
                      // display results
                      displayResults(fizzBuzzArray);
                    } else {
                      alert("You must enter integers");
                    }
                  
                  }       

                  // calculate results - loop with ternary operators
                  function fizzBuzz(fizzVal, buzzVal) {
                    let returnArray = [];
                    // loop from 1 through 100 and push the appropriate value (Fizz, Buzz, FizzBuzz, or i if neither) to the array
                    for(let i = 1; i <= 100; i++){
                      let value = ((i % fizzVal === 0 ? 'Fizz' : '') + (i % buzzVal === 0 ? 'Buzz' : '') || i );
                      returnArray.push(value);
                    }
                    // return the results
                    return returnArray;
                  }


                  // loop over array and create a table row for each item
                  function displayResults(fbData) {
                    // get the table body element from the page
                    const tableBody = document.getElementById('results');
                    // get the template row
                    const templateRow = document.getElementById('fbTemplate');
                    // clear table first
                    tableBody.innerHTML = "";
                    // loop through elements of fizz buzz data array
                    for(let i = 0; i < fbData.length; i += 5){
                      // import template element from app.html as a document fragment (essentially make a copy of it)
                      // true includes the node's descendants
                      let tableRow = document.importNode(templateRow.content, true);
                      // grab the td elements to put into an array
                      let rowCols = tableRow.querySelectorAll('td');
                      // set the class to the element in fbData 
                      // if it is "Fizz", "Buzz", or "FizzBuzz", certain CSS rules to change the color and font-weight will be triggered.
                      // cell 1
                      rowCols[0].classList.add(fbData[i]);
                      rowCols[0].textContent = fbData[i];
                      // cell 2
                      rowCols[1].classList.add(fbData[i + 1]);
                      rowCols[1].textContent = fbData[i + 1];
                      // cell 3
                      rowCols[2].classList.add(fbData[i + 2]);
                      rowCols[2].textContent = fbData[i + 2];
                      // cell 4
                      rowCols[3].classList.add(fbData[i + 3]);
                      rowCols[3].textContent = fbData[i + 3];
                      // cell 5
                      rowCols[4].classList.add(fbData[i + 4]);
                      rowCols[4].textContent = fbData[i + 4];
                      // add all the rows to the table
                      tableBody.appendChild(tableRow);
                    }
                  }
              </code>
            </pre>
          </div>
          <div class="col-lg-3">
            <p>The Code is structured using three functions.</p>
            <h5>Get Values</h5>
            <p>
              The function getValues starts things off by obtaining the Fizz and
              Buzz values from the page. These values are then passed to the
              fizzBuzz function (after successfully undergoing input validation) to calculate the results, which are returned as
              an array. Finally, the result array is passed to the
              displayResults function to display the results on the page.
            </p>
            <h5>Fizz Buzz</h5>
            <p>
              The function fizzBuzz, as the name suggests, determines which
              values qualify as Fizz, Buzz, both, or neither. This is done using
              a for loop running from 1 through 100, combined with a variable
              that contains the result of a series of ternary operators, along
              with the logical OR operator. First, if n is divisible by 3, Fizz
              + an empty string is returned, which evaluates to Fizz. Next, if n
              is divisible by 5, an empty string + Buzz is returned, which
              evaluates to Buzz. Therefore, if n is divisible by both 3 and 5,
              Fizz + Buzz is returned, which evaluates to FizzBuzz, and if n is
              divisible by neither 3 nor 5, the two "halves" of the expression
              evaluate to an empty string, which evaluates to false. Due to the
              logical OR operator, the truthy value will always be returned,
              which in this final case is n. The value is then pushed to the
              array and the array is returned after the loop ends.
            </p>
            <h5>Display Results</h5>
            <p>
              Our final function, displayResults, handles the task of displaying
              the data on the page. It accepts the array with the results
              determined by the fizzBuzz function and uses a for loop to process
              its contents. This loop relies on the template element used in
              app.html which contains one table row with five cells. This is
              targeted by our templateRow variable, which is used in the
              tableRow variable inside the loop to import its contents. Next,
              all of the cells are targeted using querySelectorAll and saved
              into the rowCols variable. We then fill all five cells using the
              current sequence of five index values to extract the appropriate
              data from the fizz buzz array fbData. We are also setting the
              class on each element using the element's contents, which if they
              happen to be Fizz, Buzz, or FizzBuzz, trigger specific rules in
              the site.css file to change the appearance of the element. Lastly,
              we append the row to the body of the table, and the process is
              repeated for the next five elements (i += 5 in the loop header)
              until all 100 numbers are processed.
            </p>
          </div>
        </div>
      </div>
    </main>
    <!-- Footer Section -->
    <footer class="footer mt-auto py-3">
      <div class="container-fluid">
        <div class="row row-cols-1 row-cols-lg-3 gy-2">
          <div
            class="col order-last order-lg-first d-flex align-items-center text-light"
          >
            <div>
              <span id="year" class="text-muted"></span> Caleb Jones |
              calebj516@gmail.com
            </div>
          </div>
          <div
            class="col d-flex align-items-center justify-content-start justify-content-lg-center"
          >
            <img
              src="img/White logo - no background.svg"
              alt="Caleb Jones Logo"
              height="100"
              width="200"
            />
          </div>
          <div
            class="col d-flex align-items-center justify-content-start justify-content-lg-end"
          >
            <div class="row">
              <div class="col social">
                <a href="#" target="_blank"
                  ><i class="fab fa-linkedin fa-2x"></i
                ></a>
              </div>
              <div class="col social">
                <a href="#" target="_blank"
                  ><i class="fab fa-github fa-2x"></i
                ></a>
              </div>
              <div class="col social">
                <a href="#" target="_blank"
                  ><i class="fab fa-twitter fa-2x"></i
                ></a>
              </div>
              <div class="col social">
                <a href="#" target="_blank"
                  ><i class="fab fa-youtube fa-2x"></i
                ></a>
              </div>
            </div>
          </div>
        </div>
      </div>
    </footer>
    <!-- Bootstrap JS -->
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-/bQdsTh/da6pkI1MST/rWKFNjaCP5gBSY4sEBT38Q/9RBh9AH40zEOg7Hlq2THRZ"
      crossorigin="anonymous"
    ></script>
    <!-- Prism JS -->
    <script src="js/prism.js"></script>
    <script>
      Prism.plugins.NormalizeWhitespace.setDefaults({
        "remove-trailing": true,
        "remove-indent": true,
        "left-trim": true,
        "right-trim": true,
      });
    </script>
    <script>
      let currentYear = new Date().getFullYear();
      document.getElementById('year').innerHTML = `&copy;${currentYear}`;
    </script>
  </body>
</html>
